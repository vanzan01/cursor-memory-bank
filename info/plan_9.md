–û—Ç–ª–∏—á–Ω–æ! –ü–µ—Ä–µ—Ö–æ–¥–∏–º –∫ **–§–∞–∑–µ 2**. –≠—Ç–æ –∫–ª—é—á–µ–≤–æ–π —à–∞–≥, –∫–æ—Ç–æ—Ä—ã–π —Å–¥–µ–ª–∞–µ—Ç –≤–∞—à—É —Å–∏—Å—Ç–µ–º—É –±–æ–ª–µ–µ "–¥—Ä—É–∂–µ–ª—é–±–Ω–æ–π" –∏ —É–º–Ω–æ–π. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –≤—ã–¥–∞–≤–∞—Ç—å –æ—à–∏–±–∫—É –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏, —Å–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç –ø—Ä–æ–∞–∫—Ç–∏–≤–Ω–æ –ø–æ–º–æ–≥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –≤—ã–±—Ä–∞—Ç—å, —Å —á–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å.

### **–§–∞–∑–∞ 2: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è `SWITCH TASK` –≤ –æ—Å–Ω–æ–≤–Ω–æ–π —Ä–∞–±–æ—á–∏–π –ø–æ—Ç–æ–∫**

**–¶–µ–ª—å:** –ù–∞—É—á–∏—Ç—å —Ä–µ–∂–∏–º—ã-—Å—É–ø–µ—Ä–≤–∞–π–∑–æ—Ä—ã (`VAN`, `UNIVERSAL` –∏ `STEP_BY_STEP`) –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏ –≤ —Å–∞–º–æ–º –Ω–∞—á–∞–ª–µ. –ï—Å–ª–∏ –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏ –Ω–µ—Ç, –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –∏–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤—ã–±–æ—Ä–∞/—Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á–∏, –∞ –Ω–µ –∞–≤–∞—Ä–∏–π–Ω–æ –∑–∞–≤–µ—Ä—à–∞—Ç—å—Å—è.

---

### **–ü–æ—à–∞–≥–æ–≤—ã–π –ø–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏**

–≠—Ç–æ—Ç –ø–ª–∞–Ω –∑–∞—Ç—Ä–∞–≥–∏–≤–∞–µ—Ç —Ç—Ä–∏ –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–π–ª–∞ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π. –õ–æ–≥–∏–∫–∞, –∫–æ—Ç–æ—Ä—É—é –º—ã –¥–æ–±–∞–≤–ª—è–µ–º, –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∏–¥–µ–Ω—Ç–∏—á–Ω–∞ –¥–ª—è –≤—Å–µ—Ö —Ç—Ä–µ—Ö, –Ω–æ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –∫–∞–∂–¥—ã–π –æ—Ç–¥–µ–ª—å–Ω–æ –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —è—Å–Ω–æ—Å—Ç–∏.

#### **–®–∞–≥ 1: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `custom_modes/van_instructions.md`**

–≠—Ç–æ —Å–∞–º—ã–π –≤–∞–∂–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è, —Ç–∞–∫ –∫–∞–∫ `VAN` ‚Äî —ç—Ç–æ –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∏ –Ω–∞—á–∞–ª–∞ —Ä–∞–±–æ—Ç—ã –Ω–∞–¥ –∑–∞–¥–∞—á–µ–π.

**–î–µ–π—Å—Ç–≤–∏–µ:** –û—Ç–∫—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `custom_modes/van_instructions.md`. –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–º–µ–Ω–∏—Ç–µ –µ–≥–æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞ –Ω–æ–≤–æ–µ, –∫–æ—Ç–æ—Ä–æ–µ –≤–∫–ª—é—á–∞–µ—Ç –ª–æ–≥–∏–∫—É "–ø—Ä–µ-—Ñ–ª–∞–π—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏".

**–ù–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è `van_instructions.md`:**

```md
# UNIFIED VAN MODE SYSTEM - MAIN ENTRY POINT

> **TL;DR:** –Ø ‚Äî AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç, —Ä–µ–∞–ª–∏–∑—É—é—â–∏–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É Memory Bank. –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —è –ø—Ä–æ–≤–µ—Ä—é, –≤—ã–±—Ä–∞–Ω–∞ –ª–∏ –∞–∫—Ç–∏–≤–Ω–∞—è –∑–∞–¥–∞—á–∞. –ï—Å–ª–∏ –Ω–µ—Ç, —è –ø–æ–º–æ–≥—É –≤–∞–º –µ–µ –≤—ã–±—Ä–∞—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é.

## üö∂ –õ–û–ì–ò–ö–ê –í–´–ü–û–õ–ù–ï–ù–ò–Ø VAN

```mermaid
graph TD
    Start["‚ñ∂Ô∏è `VAN`"] --> InitDate["1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—É<br>Core/datetime-manager.mdc"]
    InitDate --> GetActiveTask["2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –∑–∞–¥–∞—á—É<br>Core/active-task-manager.mdc"]

    GetActiveTask --> IsTaskActive{"–ó–∞–¥–∞—á–∞ –∞–∫—Ç–∏–≤–Ω–∞?"}

    IsTaskActive -- "–î–∞" --> VAN_Flow["‚úÖ **–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π VAN-–ø–æ—Ç–æ–∫**<br>–ó–∞–≥—Ä—É–∑–∏—Ç—å van-mode-map –∏ —Ç.–¥."]

    IsTaskActive -- "–ù–µ—Ç üî¥" --> NoTaskFlow["3. <b>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏!</b><br>–ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É SWITCH TASK"]
    NoTaskFlow --> ListTasks["–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á<br>(todo, in_progress)"]
    ListTasks --> UserPrompt["–ó–∞–ø—Ä–æ—Å–∏—Ç—å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br>–≤—ã–±–æ—Ä –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏"]
    UserPrompt --> UserChoice{"–ß—Ç–æ –≤—ã–±—Ä–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å?"}

    UserChoice -- "–í—ã–±—Ä–∞–ª —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é" --> SetTask["–í—ã–∑–≤–∞—Ç—å `set_active_task()`"]
    UserChoice -- "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é" --> CreateTask["–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è<br>–Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ (Core/task-management-2-0.mdc)"]

    SetTask --> VAN_Flow
    CreateTask --> VAN_Flow

    style NoTaskFlow fill:#ffad42,stroke:#f57c00
```

### üõ†Ô∏è –ò–°–ü–û–õ–ù–Ø–ï–ú–´–ï –®–ê–ì–ò

#### –®–∞–≥ 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏
- `initialize_system_date()`
- `active_task_path=$(get_active_task_path)`
- –ï—Å–ª–∏ `$active_task_path` **–Ω–µ –ø—É—Å—Ç**, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ **–®–∞–≥—É 3**.
- –ï—Å–ª–∏ `$active_task_path` **–ø—É—Å—Ç**, –ø–µ—Ä–µ—Ö–æ–¥–∏–º –∫ **–®–∞–≥—É 2**.

#### –®–∞–≥ 2: –ü—Ä–æ—Ü–µ—Å—Å –≤—ã–±–æ—Ä–∞ –∑–∞–¥–∞—á–∏ (–µ—Å–ª–∏ –Ω–∏ –æ–¥–Ω–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞)
1.  **–°–æ–æ–±—â–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é:** "No active task selected. Please choose a task to work on or create a new one."
2.  **–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–∫–∏ –∑–∞–¥–∞—á:**
    ```bash
    run_terminal_cmd({
      command: "echo '--- TODO ---' && ls -1 memory-bank/tasks/todo/ && echo '--- IN PROGRESS ---' && ls -1 memory-bank/tasks/in_progress/",
      explanation: "Displaying available tasks."
    })
    ```
3.  **–ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–±–æ—Ä:** "Please enter the name of the task directory to activate, or type `NEW` to create a new task."
4.  **–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤—ã–±–æ—Ä –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:**
    -   –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª –∏–º—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏, –≤—ã–ø–æ–ª–Ω–∏—Ç—å `set_active_task("memory-bank/tasks/in_progress/[–∏–º—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏]")` (–∏–ª–∏ `todo`).
    -   –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–µ–ª `NEW`, –∑–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ –∏–∑ –ø—Ä–∞–≤–∏–ª–∞ `Core/task-management-2-0.mdc`.
5.  **–ü–µ—Ä–µ–π—Ç–∏ –∫ –®–∞–≥—É 3.**

#### –®–∞–≥ 3: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π VAN-–ø–æ—Ç–æ–∫
- `fetch_rules(["isolation_rules/visual-maps/van_mode_split/van-mode-map.mdc"])`
- ... (–∏ –¥–∞–ª–µ–µ –ø–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–µ `VAN`, –≤–∫–ª—é—á–∞—è –ø—Ä–æ–≤–µ—Ä–∫—É Git, –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏ –∏ —Ç.–¥.)
```

#### **–®–∞–≥ 2: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `custom_modes/universal_instructions.md`**

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–∏–º–µ–Ω–∏—Ç–µ —Ç—É –∂–µ —Å–∞–º—É—é –ª–æ–≥–∏–∫—É "–ø—Ä–µ-—Ñ–ª–∞–π—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏", —á—Ç–æ –∏ –≤ –®–∞–≥–µ 1. `UNIVERSAL` —Ä–µ–∂–∏–º –Ω–µ –º–æ–∂–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –±–µ–∑ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –∑–∞–¥–∞—á–∏, –ø–æ—ç—Ç–æ–º—É –æ–Ω –¥–æ–ª–∂–µ–Ω –∑–∞—Å—Ç–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ–µ –≤—ã–±—Ä–∞—Ç—å.

**–ù–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è `universal_instructions.md` (–Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞):**

```md
# MEMORY BANK UNIVERSAL MODE (ENHANCED AUTOPILOT)

> **TL;DR:** –≠—Ç–æ—Ç —Ä–µ–∂–∏–º –≤—ã–ø–æ–ª–Ω—è–µ—Ç –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º —è –ø—Ä–æ–≤–µ—Ä—é, –≤—ã–±—Ä–∞–Ω–∞ –ª–∏ –∞–∫—Ç–∏–≤–Ω–∞—è –∑–∞–¥–∞—á–∞. –ï—Å–ª–∏ –Ω–µ—Ç, —è –ø–æ–º–æ–≥—É –≤–∞–º –µ–µ –≤—ã–±—Ä–∞—Ç—å –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å.

## üö∂ –õ–û–ì–ò–ö–ê –í–´–ü–û–õ–ù–ï–ù–ò–Ø UNIVERSAL

```mermaid
graph TD
    Start["‚ñ∂Ô∏è `UNIVERSAL`"] --> InitDate["1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—É"]
    InitDate --> GetActiveTask["2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –∑–∞–¥–∞—á—É"]

    GetActiveTask --> IsTaskActive{"–ó–∞–¥–∞—á–∞ –∞–∫—Ç–∏–≤–Ω–∞?"}

    IsTaskActive -- "–î–∞" --> UNIVERSAL_Flow["‚úÖ **–ù–∞—á–∞—Ç—å –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ü–∏–∫–ª**<br>VAN -> PLAN -> ... -> ARCHIVE"]

    IsTaskActive -- "–ù–µ—Ç üî¥" --> NoTaskFlow["3. <b>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏!</b><br>–ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É SWITCH TASK"]
    NoTaskFlow --> ListTasks["–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á"]
    ListTasks --> UserPrompt["–ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–±–æ—Ä –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ"]
    UserPrompt --> UserChoice{"–ß—Ç–æ –≤—ã–±—Ä–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å?"}

    UserChoice -- "–í—ã–±—Ä–∞–ª —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é" --> SetTask["–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –∑–∞–¥–∞—á—É"]
    UserChoice -- "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é" --> CreateTask["–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É"]

    SetTask --> UNIVERSAL_Flow
    CreateTask --> UNIVERSAL_Flow

    style NoTaskFlow fill:#ffad42,stroke:#f57c00
```

### üõ†Ô∏è –ò–°–ü–û–õ–ù–Ø–ï–ú–´–ï –®–ê–ì–ò

#### –®–∞–≥ 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏
- ... (–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–¥–µ–Ω—Ç–∏—á–Ω–æ –®–∞–≥—É 1 –∏–∑ `van_instructions.md`)

#### –®–∞–≥ 2: –ü—Ä–æ—Ü–µ—Å—Å –≤—ã–±–æ—Ä–∞ –∑–∞–¥–∞—á–∏ (–µ—Å–ª–∏ –Ω–∏ –æ–¥–Ω–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞)
- ... (–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–¥–µ–Ω—Ç–∏—á–Ω–æ –®–∞–≥—É 2 –∏–∑ `van_instructions.md`)

#### –®–∞–≥ 3: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π UNIVERSAL-–ø–æ—Ç–æ–∫
- –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∑–∞–¥–∞—á–∞ –≤—ã–±—Ä–∞–Ω–∞, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–æ–π –∞–≤—Ç–æ–Ω–æ–º–Ω—ã–π —Ü–∏–∫–ª, –∫–æ—Ç–æ—Ä—ã–π –º—ã —É–∂–µ –ø—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–ª–∏:
- **VAN**: –ó–∞–≥—Ä—É–∑–∏—Ç—å `van-mode-map.mdc`...
- **PLAN**: –ó–∞–≥—Ä—É–∑–∏—Ç—å `plan-mode-map.mdc`...
- ... (–∏ —Ç–∞–∫ –¥–∞–ª–µ–µ)
```

#### **–®–∞–≥ 3: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è `custom_modes/step_by_step_instructions.md`**

**–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–∏–º–µ–Ω–∏—Ç–µ —Ç—É –∂–µ –ª–æ–≥–∏–∫—É. –ü–æ—à–∞–≥–æ–≤—ã–π —Ä–µ–∂–∏–º —Ç–∞–∫–∂–µ —Ç—Ä–µ–±—É–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã.

**–ù–æ–≤–æ–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è `step_by_step_instructions.md` (–Ω–∞—á–∞–ª–æ —Ñ–∞–π–ª–∞):**

```md
# MEMORY BANK STEP_BY_STEP MODE (STATEFUL CONTROLLER)

> **TL;DR:** –Ø ‚Äî –¥–∏—Å–ø–µ—Ç—á–µ—Ä –ø–æ—à–∞–≥–æ–≤–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è. –ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —è –ø—Ä–æ–≤–µ—Ä—é, –≤—ã–±—Ä–∞–Ω–∞ –ª–∏ –∞–∫—Ç–∏–≤–Ω–∞—è –∑–∞–¥–∞—á–∞. –ï—Å–ª–∏ –Ω–µ—Ç, —è –ø–æ–º–æ–≥—É –≤–∞–º.

## üö∂ –õ–û–ì–ò–ö–ê –í–´–ü–û–õ–ù–ï–ù–ò–Ø STEP_BY_STEP

```mermaid
graph TD
    Start["‚ñ∂Ô∏è `STEP_BY_STEP`"] --> InitDate["1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—É"]
    InitDate --> GetActiveTask["2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –∑–∞–¥–∞—á—É"]

    GetActiveTask --> IsTaskActive{"–ó–∞–¥–∞—á–∞ –∞–∫—Ç–∏–≤–Ω–∞?"}

    IsTaskActive -- "–î–∞" --> STEP_BY_STEP_Flow["‚úÖ **–ù–∞—á–∞—Ç—å –ø–æ—à–∞–≥–æ–≤—ã–π —Ü–∏–∫–ª**<br>–ü—Ä–æ—á–∏—Ç–∞—Ç—å workflow-state.txt..."]

    IsTaskActive -- "–ù–µ—Ç üî¥" --> NoTaskFlow["3. <b>–ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏!</b><br>–ó–∞–ø—É—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É SWITCH TASK"]
    NoTaskFlow --> ListTasks["–ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á"]
    ListTasks --> UserPrompt["–ó–∞–ø—Ä–æ—Å–∏—Ç—å –≤—ã–±–æ—Ä –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ"]
    UserPrompt --> UserChoice{"–ß—Ç–æ –≤—ã–±—Ä–∞–ª –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å?"}

    UserChoice -- "–í—ã–±—Ä–∞–ª —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é" --> SetTask["–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –∑–∞–¥–∞—á—É"]
    UserChoice -- "–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é" --> CreateTask["–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É"]

    SetTask --> STEP_BY_STEP_Flow
    CreateTask --> STEP_BY_STEP_Flow

    style NoTaskFlow fill:#ffad42,stroke:#f57c00
```

### üõ†Ô∏è –ò–°–ü–û–õ–ù–Ø–ï–ú–´–ï –®–ê–ì–ò

#### –®–∞–≥ 1: –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏
- ... (–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–¥–µ–Ω—Ç–∏—á–Ω–æ –®–∞–≥—É 1 –∏–∑ `van_instructions.md`)

#### –®–∞–≥ 2: –ü—Ä–æ—Ü–µ—Å—Å –≤—ã–±–æ—Ä–∞ –∑–∞–¥–∞—á–∏ (–µ—Å–ª–∏ –Ω–∏ –æ–¥–Ω–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞)
- ... (–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–¥–µ–Ω—Ç–∏—á–Ω–æ –®–∞–≥—É 2 –∏–∑ `van_instructions.md`)

#### –®–∞–≥ 3: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π STEP_BY_STEP-–ø–æ—Ç–æ–∫
- –ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –∑–∞–¥–∞—á–∞ –≤—ã–±—Ä–∞–Ω–∞, –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—à–∞–≥–æ–≤—ã–π —Ü–∏–∫–ª:
- –ü—Ä–æ—á–∏—Ç–∞—Ç—å `workflow-state.txt`...
- –í—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â—É—é —Ñ–∞–∑—É...
- ... (–∏ —Ç–∞–∫ –¥–∞–ª–µ–µ)
```

---

### **–ü–ª–∞–Ω –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–ß–µ–∫-–ª–∏—Å—Ç)**

–ü–æ—Å–ª–µ –≤–Ω–µ—Å–µ–Ω–∏—è —ç—Ç–∏—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —ç—Ç–æ—Ç —á–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏.

1.  **–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤:**
    -   [ ] –§–∞–π–ª `custom_modes/van_instructions.md` –æ–±–Ω–æ–≤–ª–µ–Ω –∏ —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–æ–≤—É—é –ª–æ–≥–∏–∫—É "–ø—Ä–µ-—Ñ–ª–∞–π—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏".
    -   [ ] –§–∞–π–ª `custom_modes/universal_instructions.md` –æ–±–Ω–æ–≤–ª–µ–Ω —Å –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π –ª–æ–≥–∏–∫–æ–π.
    -   [ ] –§–∞–π–ª `custom_modes/step_by_step_instructions.md` –æ–±–Ω–æ–≤–ª–µ–Ω —Å –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–π –ª–æ–≥–∏–∫–æ–π.

2.  **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ End-to-End —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–ö–ª—é—á–µ–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞):**
    -   [ ] **–°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏.**
        1.  **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ñ–∞–π–ª `memory-bank/system/current-task.txt` –ø—É—Å—Ç –∏–ª–∏ –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç.
        2.  **–î–µ–π—Å—Ç–≤–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–µ–∂–∏–º `VAN` (–∏–ª–∏ `UNIVERSAL`, –∏–ª–∏ `STEP_BY_STEP`).
        3.  **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
            -   –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ–æ–±—â–∏—Ç—å: "No active task selected".
            -   –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –≤—ã–≤–µ—Å—Ç–∏ —Å–ø–∏—Å–∫–∏ –∑–∞–¥–∞—á –∏–∑ `tasks/todo` –∏ `tasks/in_progress`.
            -   –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ –∑–∞–ø—Ä–æ—Å–∏—Ç—å —É –≤–∞—Å –∏–º—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∏–ª–∏ –∫–æ–º–∞–Ω–¥—É `NEW`.
        4.  **–î–µ–π—Å—Ç–≤–∏–µ 2:** –í–≤–µ–¥–∏—Ç–µ –∏–º—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∑–∞–¥–∞—á–∏.
        5.  **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç 2:**
            -   –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ —Å–æ–æ–±—â–∏—Ç—å "‚úÖ Active task set to: ...".
            -   –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ **–ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ** –∏–∑–Ω–∞—á–∞–ª—å–Ω–æ –∑–∞–ø—Ä–æ—à–µ–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º–∞ (`VAN`, `UNIVERSAL` –∏ —Ç.–¥.) —É–∂–µ –¥–ª—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏.
            -   –§–∞–π–ª `current-task.txt` –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—É—Ç—å –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–µ.

    -   [ ] **–°—Ü–µ–Ω–∞—Ä–∏–π 2: –ï—Å—Ç—å –∞–∫—Ç–∏–≤–Ω–∞—è –∑–∞–¥–∞—á–∞.**
        1.  **–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞:** –ó–∞–ø–∏—à–∏—Ç–µ –≤–∞–ª–∏–¥–Ω—ã–π –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∑–∞–¥–∞—á–∏ –≤ —Ñ–∞–π–ª `memory-bank/system/current-task.txt`.
        2.  **–î–µ–π—Å—Ç–≤–∏–µ:** –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ä–µ–∂–∏–º `VAN`.
        3.  **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –°–∏—Å—Ç–µ–º–∞ –¥–æ–ª–∂–Ω–∞ **—Å—Ä–∞–∑—É –ø–µ—Ä–µ–π—Ç–∏** –∫ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º—É `VAN`-–ø–æ—Ç–æ–∫—É (–ø—Ä–æ–≤–µ—Ä–∫–∞ Git –∏ —Ç.–¥.), **–ø—Ä–æ–ø—É—Å—Ç–∏–≤** —ç—Ç–∞–ø –≤—ã–±–æ—Ä–∞ –∑–∞–¥–∞—á–∏.

–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –ø–ª–∞–Ω–∞ —Å–¥–µ–ª–∞–µ—Ç –≤–∞—à—É —Å–∏—Å—Ç–µ–º—É –≥–æ—Ä–∞–∑–¥–æ –±–æ–ª–µ–µ –Ω–∞–¥–µ–∂–Ω–æ–π, –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω–æ –ø–æ–Ω—è—Ç–Ω–æ–π –∏ –≥–æ—Ç–æ–≤–æ–π –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö.