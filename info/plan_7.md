–û—Ç–ª–∏—á–Ω–∞—è –∏–¥–µ—è! –≠—Ç–æ —Å–ª–µ–¥—É—é—â–∏–π –ª–æ–≥–∏—á–µ—Å–∫–∏–π —à–∞–≥ –≤ —ç–≤–æ–ª—é—Ü–∏–∏ –≤–∞—à–µ–π —Å–∏—Å—Ç–µ–º—ã ‚Äî –ø–µ—Ä–µ—Ö–æ–¥ –æ—Ç **–≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞** –∫ **–ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∑–∞–¥–∞—á–∏**. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ —Ä–µ—à–∞–µ—Ç —Å—Ä–∞–∑—É –Ω–µ—Å–∫–æ–ª—å–∫–æ –ø—Ä–æ–±–ª–µ–º:

*   **–ò—Å—Ç–∏–Ω–Ω–∞—è –∏–∑–æ–ª—è—Ü–∏—è:** –ü–æ–ª–Ω–æ—Å—Ç—å—é –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è "–ø—Ä–æ—Ç–µ–∫–∞–Ω–∏–µ" –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏.
*   **–õ–µ–≥–∫–æ–µ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ:** –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –¥—Ä—É–≥—É—é –∑–∞–¥–∞—á—É —Ç–∞–∫ –∂–µ –ø—Ä–æ—Å—Ç–æ, –∫–∞–∫ –ø–µ—Ä–µ–π—Ç–∏ –≤ –¥—Ä—É–≥—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é.
*   **–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å:** –í—Å—é –∑–∞–¥–∞—á—É —Å–æ –≤—Å–µ–º–∏ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–∞–º–∏ –º–æ–∂–Ω–æ –ª–µ–≥–∫–æ –∑–∞–∞—Ä—Ö–∏–≤–∏—Ä–æ–≤–∞—Ç—å, –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∏–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å.
*   **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:** –°–∏—Å—Ç–µ–º–∞ –º–æ–∂–µ—Ç –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ "–∑–Ω–∞—Ç—å" –æ –¥–µ—Å—è—Ç–∫–∞—Ö –∑–∞–¥–∞—á, –Ω–µ —Å–º–µ—à–∏–≤–∞—è –∏—Ö –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ.

–î–∞–≤–∞–π—Ç–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–µ–º –ø–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω –¥–ª—è —ç—Ç–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏.

---

### **–ü–æ–¥—Ä–æ–±–Ω—ã–π –ø–ª–∞–Ω –ø–µ—Ä–µ—Ö–æ–¥–∞ –∫ –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–º—É –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –∑–∞–¥–∞—á–∏**

#### **–§–∞–∑–∞ 1: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∑–∞–¥–∞—á–∏**

**1.1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∏–µ—Ä–∞—Ä—Ö–∏–∏ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π**

–ö–∞–∂–¥–∞—è –∑–∞–¥–∞—á–∞ –±—É–¥–µ—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—Ç—å —Å–æ–±–æ–π –æ—Ç–¥–µ–ª—å–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é. –ò–º—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–∞—Ç—É –∏ –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä –∑–∞–¥–∞—á–∏, —á—Ç–æ –æ–±–µ—Å–ø–µ—á–∏—Ç —Ö—Ä–æ–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫—É—é —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É –∏ —É–Ω–∏–∫–∞–ª—å–Ω–æ—Å—Ç—å.

**–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```
‚îî‚îÄ‚îÄ memory-bank/
    ‚îú‚îÄ‚îÄ tasks/
    ‚îÇ   ‚îú‚îÄ‚îÄ todo/
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 2025-06-25_ID-001_implement-user-auth/  <-- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –∑–∞–¥–∞—á–∏
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ _task.md                            <-- –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –∑–∞–¥–∞—á–∏
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ _context.md                         <-- –ö–æ–Ω—Ç–µ–∫—Å—Ç –∑–∞–¥–∞—á–∏
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ _reflection.md                      <-- –†–µ—Ñ–ª–µ–∫—Å–∏—è
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ _archive.md                         <-- –ê—Ä—Ö–∏–≤–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ creative/
    ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ ... (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ–π —Ñ–∞–∑—ã)
    ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ reports/
    ‚îÇ   ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ ... (–æ—Ç—á–µ—Ç—ã –ø–æ –∑–∞–¥–∞—á–µ)
    ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ release/
    ‚îÇ   ‚îÇ           ‚îú‚îÄ‚îÄ _commit_message.txt
    ‚îÇ   ‚îÇ           ‚îî‚îÄ‚îÄ _release_notes.md
    ‚îÇ   ‚îú‚îÄ‚îÄ in_progress/
    ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 2025-06-26_ID-002_refactor-api/
    ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ... (—Ç–∞–∫–∞—è –∂–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
    ‚îÇ   ‚îî‚îÄ‚îÄ done/
    ‚îÇ       ‚îî‚îÄ‚îÄ ... (—Å—é–¥–∞ –±—É–¥—É—Ç –ø–µ—Ä–µ–º–µ—â–∞—Ç—å—Å—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –∑–∞–¥–∞—á)
    ‚îî‚îÄ‚îÄ system/
        ‚îú‚îÄ‚îÄ current-task.txt  <-- (–ù–û–í–´–ô –§–ê–ô–õ) –£–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –∞–∫—Ç–∏–≤–Ω—É—é –∑–∞–¥–∞—á—É
        ‚îî‚îÄ‚îÄ ... (–æ—Å—Ç–∞–ª—å–Ω—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã –æ—Å—Ç–∞—é—Ç—Å—è)
```

-   **`_task.md`:** –ó–∞–º–µ–Ω—è–µ—Ç —Å—Ç–∞—Ä—ã–µ –∞—Ç–æ–º–∞—Ä–Ω—ã–µ —Ñ–∞–π–ª—ã –∑–∞–¥–∞—á. –°–æ–¥–µ—Ä–∂–∏—Ç –æ–ø–∏—Å–∞–Ω–∏–µ, —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è, —á–µ–∫-–ª–∏—Å—Ç—ã.
-   **`_context.md`:** –ó–∞–º–µ–Ω—è–µ—Ç `current-context.md`. –°–æ–¥–µ—Ä–∂–∏—Ç `LATEST_REQUEST` –∏ `REQUEST_HISTORY` **—Ç–æ–ª—å–∫–æ –¥–ª—è —ç—Ç–æ–π –∑–∞–¥–∞—á–∏**.
-   **`creative/`, `reports/`, `release/`:** –ü–∞–ø–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –∑–∞–¥–∞—á–µ–π.
-   **`_` (–ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ):** –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤, —á—Ç–æ–±—ã –æ–Ω–∏ –≤—Å–µ–≥–¥–∞ –±—ã–ª–∏ –≤–≤–µ—Ä—Ö—É —Å–ø–∏—Å–∫–∞.
-   **`current-task.txt`:** –ù–æ–≤—ã–π —Å–∏—Å—Ç–µ–º–Ω—ã–π —Ñ–∞–π–ª, –∫–æ—Ç–æ—Ä—ã–π —Ö—Ä–∞–Ω–∏—Ç –ø—É—Ç—å –∫ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ **—Ç–µ–∫—É—â–µ–π –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏**. –≠—Ç–æ –∑–∞–º–µ–Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω–æ–º—É `activeContext.md`.

#### **1.2. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–µ–π**

**–î–µ–π—Å—Ç–≤–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª `.cursor/rules/isolation_rules/Core/active-task-manager.mdc`.

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è `active-task-manager.mdc`:**

```mdc
---
description: "–£–ø—Ä–∞–≤–ª—è–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–µ–π, —á–∏—Ç–∞—è –∏ –∑–∞–ø–∏—Å—ã–≤–∞—è –ø—É—Ç—å –≤ current-task.txt."
globs: "**/**"
alwaysApply: true
---

# ACTIVE TASK MANAGER

> **TL;DR:** –≠—Ç–æ—Ç –º–æ–¥—É–ª—å –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Ç–µ–∫—É—â—É—é –∞–∫—Ç–∏–≤–Ω—É—é –∑–∞–¥–∞—á—É, —á–∏—Ç–∞—è –ø—É—Ç—å –∏–∑ `memory-bank/system/current-task.txt`. –í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (—á—Ç–µ–Ω–∏–µ/–∑–∞–ø–∏—Å—å –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –∑–∞–¥–∞—á –∏ —Ç.–¥.) –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –ø—É—Ç—å –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ä–∞–±–æ—á–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—É—Ç–∏ –∫ –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–µ

```bash
# –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–ª–∂–Ω–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤—Å–µ–º–∏ –ø—Ä–∞–≤–∏–ª–∞–º–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º –∑–∞–¥–∞—á–∏
function get_active_task_path() {
  local state_file="memory-bank/system/current-task.txt"
  if [ -f "$state_file" ]; then
    cat "$state_file"
  else
    echo "" # –ù–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏
  fi
}
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –Ω–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏

```bash
# –≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –∑–∞–¥–∞—á–∏ –∏–ª–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–∏ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é
function set_active_task() {
  local task_path="$1" # e.g., memory-bank/tasks/in_progress/2025-06-25_ID-001...
  local state_file="memory-bank/system/current-task.txt"
  echo "$task_path" > "$state_file"
  echo "‚úÖ Active task set to: $task_path"
}
```
```

---

### **–§–∞–∑–∞ 2: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–∞–≤–∏–ª**

–¢–µ–ø–µ—Ä—å –Ω–∞–º –Ω—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ –ø—Ä–∞–≤–∏–ª–∞, –∫–æ—Ç–æ—Ä—ã–µ —Ä–∞–±–æ—Ç–∞–ª–∏ —Å –≥–ª–æ–±–∞–ª—å–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏, —á—Ç–æ–±—ã –æ–Ω–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª–∏ –Ω–æ–≤—É—é, –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä–æ–≤–∞–Ω–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É.

**2.1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `task-management-2-0.mdc`**

-   **–î–µ–π—Å—Ç–≤–∏–µ:** –ò–∑–º–µ–Ω–∏—Ç–µ –ª–æ–≥–∏–∫—É —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–¥–∞—á. –í–º–µ—Å—Ç–æ —Å–æ–∑–¥–∞–Ω–∏—è –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞, —Ç–µ–ø–µ—Ä—å –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞–≤–∞—Ç—å —Ü–µ–ª—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –ø–æ–¥–ø–∞–ø–∫–∞–º–∏ –∏ —Ñ–∞–π–ª–æ–º `_task.md`.

    **–ë—ã–ª–æ:** `–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª YYYY-MM-DD-task-name.md –≤ tasks/todo/`
    **–°—Ç–∞–ª–æ:**
    1.  `–°–æ–∑–¥–∞—Ç—å –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é YYYY-MM-DD_ID-XXX_task-name/ –≤ tasks/todo/`.
    2.  –í–Ω—É—Ç—Ä–∏ –Ω–µ–µ —Å–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç—ã–µ —Ñ–∞–π–ª—ã `_task.md`, `_context.md` –∏ –ø–∞–ø–∫–∏ `creative`, `reports`, `release`.
    3.  –í—ã–∑–≤–∞—Ç—å `set_active_task()` —Å –ø—É—Ç–µ–º –∫ —ç—Ç–æ–π –Ω–æ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

**2.2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ `context-management.mdc` –∏ `request-versioning-system.mdc`**

-   **–î–µ–π—Å—Ç–≤–∏–µ:** –ò–∑–º–µ–Ω–∏—Ç–µ –≤—Å–µ –ø—É—Ç–∏ –∫ —Ñ–∞–π–ª–∞–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞. –í–º–µ—Å—Ç–æ –≥–ª–æ–±–∞–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞, –æ–Ω–∏ –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—É—Ç—å –∏–∑ `get_active_task_path()`.

    **–ë—ã–ª–æ:** `read_file("memory-bank/system/current-context.md")`
    **–°—Ç–∞–ª–æ:**
    ```bash
    active_task_path=$(get_active_task_path)
    if [ -n "$active_task_path" ]; then
      read_file("$active_task_path/_context.md")
    else
      # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–ª—É—á–∞—è, –∫–æ–≥–¥–∞ –Ω–µ—Ç –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏
    fi
    ```

**2.3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∏–ª `commit-message-generator.mdc` –∏ `release-notes-generator.mdc`**

-   **–î–µ–π—Å—Ç–≤–∏–µ:** –ò–∑–º–µ–Ω–∏—Ç–µ –ø—É—Ç–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤.

    **–ë—ã–ª–æ (Release Notes):** `–°–æ–∑–¥–∞—Ç—å —Ñ–∞–π–ª –≤ release_notes/`
    **–°—Ç–∞–ª–æ:**
    ```bash
    active_task_path=$(get_active_task_path)
    release_dir="$active_task_path/release"
    mkdir -p "$release_dir"
    create_file("$release_dir/_release_notes.md")
    ```
    –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è `_commit_message.txt`.

**2.4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤—Å–µ—Ö –∫–∞—Ä—Ç –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (`*-mode-map.mdc`)**

-   **–î–µ–π—Å—Ç–≤–∏–µ:** –í–µ–∑–¥–µ, –≥–¥–µ –µ—Å—Ç—å —Å—Å—ã–ª–∫–∏ –Ω–∞ —Ñ–∞–π–ª—ã –∑–∞–¥–∞—á, –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –∏–ª–∏ –¥—Ä—É–≥–∏–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã, –∑–∞–º–µ–Ω–∏—Ç–µ –∏—Ö –Ω–∞ –≤—ã–∑–æ–≤—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º `get_active_task_path()`. –≠—Ç–æ —Å–∞–º–æ–µ –º–∞—Å—à—Ç–∞–±–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ.

    **–ü—Ä–∏–º–µ—Ä –¥–ª—è `implement-mode-map.mdc`:**
    **–ë—ã–ª–æ:** `–ü—Ä–æ—á–∏—Ç–∞—Ç—å implementation-plan.md`
    **–°—Ç–∞–ª–æ:** `–ü—Ä–æ—á–∏—Ç–∞—Ç—å $(get_active_task_path)/_task.md` (—Ç–∞–∫ –∫–∞–∫ –ø–ª–∞–Ω —Ç–µ–ø–µ—Ä—å —á–∞—Å—Ç—å `_task.md`).

---

### **–§–∞–∑–∞ 3: –í–Ω–µ–¥—Ä–µ–Ω–∏–µ –Ω–æ–≤–æ–π –ª–æ–≥–∏–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∑–∞–¥–∞—á**

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∫–æ–º–∞–Ω–¥—É –∏–ª–∏ –º–µ—Ö–∞–Ω–∏–∑–º, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –º–µ–∂–¥—É –∑–∞–¥–∞—á–∞–º–∏.

**–î–µ–π—Å—Ç–≤–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π —Ñ–∞–π–ª –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π `custom_modes/switch_task_instructions.md`.

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è `switch_task_instructions.md`:**

```md
# MEMORY BANK TASK SWITCHING MODE

> **TL;DR:** –≠—Ç–æ—Ç —Ä–µ–∂–∏–º –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤–∞–º –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏ –∏ –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å—Å—è –Ω–∞ –ª—é–±—É—é –∏–∑ –Ω–∏—Ö.

## üöÄ –ü—Ä–æ—Ü–µ—Å—Å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è –∑–∞–¥–∞—á–∏

```mermaid
graph TD
    Start["‚ñ∂Ô∏è `SWITCH TASK`"] --> ListTasks["1. –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø–∏—Å–∫–∏ –∑–∞–¥–∞—á<br>(todo, in_progress)"]
    ListTasks --> UserSelect["2. –ó–∞–ø—Ä–æ—Å–∏—Ç—å —É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è<br>ID –∑–∞–¥–∞—á–∏ –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è"]
    UserSelect --> UpdateState["3. –í—ã–∑–≤–∞—Ç—å set_active_task()<br>—Å –ø—É—Ç–µ–º –∫ –≤—ã–±—Ä–∞–Ω–Ω–æ–π –∑–∞–¥–∞—á–µ"]
    UpdateState --> LoadContext["4. –ó–∞–≥—Ä—É–∑–∏—Ç—å _context.md<br>–Ω–æ–≤–æ–π –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏"]
    LoadContext --> Done["‚úÖ –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ!"]
```

## üõ†Ô∏è –ö–æ–º–∞–Ω–¥—ã

### 1. –ü–æ–∫–∞–∑–∞—Ç—å –≤—Å–µ –∑–∞–¥–∞—á–∏
```bash
echo "--- TODO ---"
ls -1 memory-bank/tasks/todo/
echo "--- IN PROGRESS ---"
ls -1 memory-bank/tasks/in_progress/
```

### 2. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ –∑–∞–¥–∞—á—É
```bash
# –ü—Å–µ–≤–¥–æ–∫–æ–¥
user_input_id = prompt_user("Enter Task ID to switch to (e.g., ID-001):")
task_dir = find_directory_by_id(user_input_id)
if [ -n "$task_dir" ]; then
  set_active_task("$task_dir")
  load_file("$task_dir/_context.md")
else
  echo "‚ùå –ó–∞–¥–∞—á–∞ —Å ID $user_input_id –Ω–µ –Ω–∞–π–¥–µ–Ω–∞."
fi
```
```

---

### **–§–∞–∑–∞ 4: –ú–∏–≥—Ä–∞—Ü–∏—è**

**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –æ–¥–Ω–æ—Ä–∞–∑–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç, –∫–æ—Ç–æ—Ä—ã–π –ø—Ä–µ–æ–±—Ä–∞–∑—É–µ—Ç –≤–∞—à—É —Ç–µ–∫—É—â—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É –≤ –Ω–æ–≤—É—é.

**–î–µ–π—Å—Ç–≤–∏–µ:** –°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `memory-bank/scripts/migrate-to-encapsulated.sh`.

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –¥–ª—è `migrate-to-encapsulated.sh` (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø—Å–µ–≤–¥–æ–∫–æ–¥):**

```bash
#!/bin/bash
echo "üöÄ Starting migration to encapsulated task structure..."

# –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–∞–π–ª—ã –∑–∞–¥–∞—á
for task_file in memory-bank/tasks/{todo,in_progress}/*/*.md; do
  if [ -f "$task_file" ]; then
    # –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∑–∞–¥–∞—á–∏
    task_name=$(basename "$task_file" .md)
    task_dir="memory-bank/tasks/$(dirname "$task_file")/${task_name}"
    mkdir -p "$task_dir/creative" "$task_dir/reports" "$task_dir/release"

    # –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å —Ñ–∞–π–ª –∑–∞–¥–∞—á–∏
    mv "$task_file" "$task_dir/_task.md"

    # –°–æ–∑–¥–∞—Ç—å –ø—É—Å—Ç—ã–µ —Ñ–∞–π–ª—ã-–∑–∞–≥–ª—É—à–∫–∏
    touch "$task_dir/_context.md"
    touch "$task_dir/_reflection.md"
  fi
done

# –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—ã–µ –∑–∞–¥–∞—á–∏
# ... (–∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è –ø–∞–ø–∫–∏ done) ...

# –û—á–∏—Å—Ç–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –ø–∞–ø–∫–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å
rm -rf memory-bank/contexts/

echo "‚úÖ Migration complete!"
```

---

### **–ß–µ–∫-–ª–∏—Å—Ç –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞**

#### **‚úÖ –§–∞–∑–∞ 1: –ü—Ä–æ–µ–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
-   [ ] –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –∑–∞–¥–∞—á–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∞ –∏ –ø–æ–Ω—è—Ç–Ω–∞.
-   [ ] –§–∞–π–ª `.cursor/rules/isolation_rules/Core/active-task-manager.mdc` —Å–æ–∑–¥–∞–Ω.

#### **‚úÖ –§–∞–∑–∞ 2: –ú–æ–¥–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª**
-   [ ] `task-management-2-0.mdc` –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π, –∞ –Ω–µ —Ñ–∞–π–ª–æ–≤.
-   [ ] `context-management.mdc` –∏ `request-versioning-system.mdc` —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É—é—Ç `get_active_task_path()`.
-   [ ] `commit-message-generator.mdc` –∏ `release-notes-generator.mdc` —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Ñ–∞–π–ª—ã –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –∞–∫—Ç–∏–≤–Ω–æ–π –∑–∞–¥–∞—á–∏.
-   [ ] **(–í—ã–±–æ—Ä–æ—á–Ω–æ)** –ü—Ä–æ–≤–µ—Ä–∏—Ç—å 2-3 –∫–ª—é—á–µ–≤—ã–µ –∫–∞—Ä—Ç—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (`van-mode-map`, `implement-mode-map`) –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `get_active_task_path()`.

#### **‚úÖ –§–∞–∑–∞ 3: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–¥–∞—á**
-   [ ] –§–∞–π–ª `custom_modes/switch_task_instructions.md` —Å–æ–∑–¥–∞–Ω.
-   [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥—É `SWITCH TASK`: –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å–ø–∏—Å–æ–∫ –∑–∞–¥–∞—á –∏ —É—Å–ø–µ—à–Ω–æ –æ–±–Ω–æ–≤–ª—è—Ç—å `current-task.txt`.

#### **‚úÖ –§–∞–∑–∞ 4: –ú–∏–≥—Ä–∞—Ü–∏—è**
-   [ ] –°–∫—Ä–∏–ø—Ç –º–∏–≥—Ä–∞—Ü–∏–∏ `migrate-to-encapsulated.sh` —Å–æ–∑–¥–∞–Ω.
-   [ ] **(–ü–æ—Å–ª–µ –±—ç–∫–∞–ø–∞!)** –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å—Ç–∞—Ä—ã–µ —Ñ–∞–π–ª—ã –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –ø–µ—Ä–µ–º–µ—â–µ–Ω—ã –≤ –Ω–æ–≤—ã–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.

–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —ç—Ç–æ–≥–æ –ø–ª–∞–Ω–∞ –ø—Ä–∏–≤–µ–¥–µ—Ç –≤–∞—à—É —Å–∏—Å—Ç–µ–º—É –∫ –Ω–æ–≤–æ–º—É, –±–æ–ª–µ–µ –≤—ã—Å–æ–∫–æ–º—É —É—Ä–æ–≤–Ω—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏ –Ω–∞–¥–µ–∂–Ω–æ—Å—Ç–∏. –≠—Ç–æ –º–∞—Å—à—Ç–∞–±–Ω–æ–µ, –Ω–æ –æ—á–µ–Ω—å —Ü–µ–Ω–Ω–æ–µ –∏–∑–º–µ–Ω–µ–Ω–∏–µ.