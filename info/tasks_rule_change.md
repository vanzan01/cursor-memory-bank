PLAN давай сделаем несколько исправлений в правилах в соответствии с правилами @changing_the_rules.md

мне нужно

- поменять формат создания отчетных всех файлов которые содержат дату
дату сейчас нужно будет хранить в формате YYYY-MM-DD и помещать в начала имени файла - поскольку это облегчает сортировку и визуальную навигацию
- в связи с предыдущим пунктом  необходимо будет создать команды в режиме REFLECT
которые будут делать отчет о выполненных задача за текущий день, неделю, месяц
отчеты могут содержать ссылки на таск или задачу в архиве
- работа с тасками: файл таск постоянно увеличивается, отсюда необходимо каждый таск размещать в отдельном файле, правило именования такое же сначала дата в новом формате, потом название
- готовые таски нужно переносить в папку tasks/done, запланированные в папку tasks/todo таски в работе в папку tasks/in_progress
- отсюда еще одна особенность, сохранение текущего чата, как описано в правиле относительно current-context.md в .cursor/rules/isolation_rules/Core/context-management.mdc - контекст должен сохраняться для каждой задачи отдельно, чтобы можно было переключаться между задачами и даже работать над несколькими непересекающимися одновременно

- для режимов PLAN/CREATIVE - вдруг я забыл или нет указаний нужно добавить анализ требований пользователя, если чего-то не понятно, но перед эти нужно выполнять поиск командой `@Web` нельзя запускать задачу, если все детали еще не ясны

- команда VAN в как в отдельном файле инструкций так и в рамках UNIVERSAL
должна выполнить миграцию в новый формат всех найденных задач, и должна это делать при каждой активации VAN это применимо в том числе к задачам которые найдены через поиск в начале ее запуска, все новые задания должны быть размещены по задачам

- нужно будет обновить так же все режимы работы @/custom_modes для того чтобы эти изменения применялись
- нужно будет подготовить файлы в директории @/optimization-journey  и добавить то чего не хватает

- по завершению задачи обновить readme и добавить release notes

работу выполнять в отдельной ветке git - после успешного завершения фазы ARCHIVE ветку нужно смержить в main

приступим?

PLAN
мне нужно ОБНОВИТЬ СИСТЕМУ ПРАВИЛ в соответствии с правилами @changing_the_rules.md

внести следующие изменения и дополнения

- поменять формат создания отчетных всех файлов которые содержат дату
дату сейчас нужно будет хранить в формате YYYY-MM-DD и помещать в начала имени файла - поскольку это облегчает сортировку и визуальную навигацию
- в связи с предыдущим пунктом  необходимо будет создать команды для режиме REFLECT
которые будут делать отчет о выполненных задача за текущий день, неделю, месяц
отчеты могут содержать ссылки на таск или задачу в архиве
- работа с тасками: файл таск постоянно увеличивается, отсюда необходимо каждый таск размещать в отдельном файле, правило именования такое же сначала дата в новом формате, потом название
- готовые таски нужно переносить в папку tasks/done, запланированные в папку tasks/todo таски в работе в папку tasks/in_progress
- отсюда еще одна особенность, сохранение текущего чата, как описано в правиле относительно current-context.md в .cursor/rules/isolation_rules/Core/context-management.mdc - контекст должен сохраняться для каждой задачи отдельно, чтобы можно было переключаться между задачами и даже работать над несколькими непересекающимися одновременно

- для режимов PLAN и CREATIVE - вдруг я забыл или нет указаний нужно добавить анализ требований пользователя, если чего-то не понятно, но перед эти нужно выполнять поиск командой `@Web` нельзя запускать задачу, если все детали еще не ясны

- команда VAN в как в отдельном файле инструкций так и в рамках UNIVERSAL
должна выполнить миграцию в новый формат всех найденных задач, и должна это делать при каждой активации VAN это применимо в том числе к задачам которые найдены через поиск в начале ее запуска, все новые задания должны быть размещены по задачам

- нужно будет обновить так же все режимы работы @/custom_modes для того чтобы эти изменения применялись
- нужно будет подготовить файлы в директории @/optimization-journey  и добавить то чего не хватает

- по завершению задачи обновить readme и добавить release notes

PLAN я хочу изменить правила в соответстии с правилами@changing_the_rules.md

---

добавить

- проверять предыдущие выводы при замене, углубляя их, и приводя причины для удаления каких-то положения
- для тестирования всегда использовать команды shell cli timeout и подобные, поскольку тесты могут зависать
- при выполнении команд в командной строке, следует так же использовать timeout, поскольку команды могут зависать
- проверять что для тестирования команд работы с сервером, основная команда отправляется в фоне, и не блокируется
- при формировании контекста приложения в режиме VAN проверять что указана рабочая директория
- в режие plan уточнять рабочую директорию, все директории от корня проекта приложения
- в режиме VAN всегда проверять текущую дату и изменять ее в соотсветствуюем файле
- команда ПРОДОЛЖАЙ поступившая от пользователя, должна интепретироваться так, чтобы был восстановлен контекст это нужно свериться с текущими задачами, если чат пустой и попросить выбрать режим пользователя ( это нужно добавить так же в файлы custom_modes)
- нужно посмотреть как можно переключать модели, например для задач REFLECT/VAN - можно выбирать бесплатные модели типа gemini-2.5-flash
- фаза PLAN/CREATIVE должа быть умной, поэтому нужно использвать модели sonnet-4
- при анализе проекта необходимо проанализировать структуру проекта и выбрать инструменты для тестирования, среду ( например версию bun/node/deno) сразу задавать вопросы по этому поводу
эти параметры должны быть помещены в системный контекст - описания проекта
- система ДОЛЖНА уважать выбор, но можно предлагать свои варианты
- РЕЖИМ MANUAL должен работать только в CREATIVE при выборе вариантов

- нужно так же в запросах сохранять изначальные запросы пользователя, чтобы он мог обратиться и изменить свою изначальную формулировку, так, чтобы другие модели могли интерпретировать ее так же
для этого нужне режим REVIEW в этом режиме нужно складывать все уточнения пользователя и затем проводить анализ, режим REVIEW может быть частью PLAN или CREATIVE


нужно добавить что можно/нужно использорвать поиск в @Web для поиска информации об ошибках в коде и о новых фичах языка или инструментов
это можно добавить во все режимы в правила и так же в описание режимов в папке@/custom_modes


давай обновим докуметацию проекта и добавим отсутствующие шаги в директорию @/optimization-journey
мы сделали много чего - Тебенужно будет проверить что есть, чего не хватает, но делать обновления в новом файле

пользователь должен знать об изменениях, поэтому так же обнови release notes


QA одно важное дополение - нужно сохранять текущий запрос пользователя и режим работы в отдельный файл
если задача завершилась до конца, удалять запрос, если же нет( по какой бы то ни было причине) или при перестарте
восстанавливать - это функционал для команды COUNTINUE

давай это внесем во все правила


QA так же нужно добавить момент, что при инициализации проекта
- проверять все .md в папках rules правила могут быть для чего-то сохранены - их можно указать в контексте как ссылки на файлы
- указать что в режиме VAN или при инициализации проекта, можно найти TODO и другие задачи, в файлах .md чтобы их можно было записать в список задачь текущего проекта
